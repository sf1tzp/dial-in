<script lang="ts">
    import CircleUserRound from "@lucide/svelte/icons/circle-user-round";
    import Upload from "@lucide/svelte/icons/upload";

	import { authClient } from "$lib/auth-client";
    import { redirect } from "@sveltejs/kit";
    import { goto } from "$app/navigation";
	const session = authClient.useSession();

    import { env } from '$env/dynamic/public';
    const LOGIN_PAGE = env.PUBLIC_BETTER_AUTH_URL!;

</script>

{#snippet LinkedInIcon({ fill = "currentColor", class: className = "" })}
<svg class={className} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 850" fill={fill}>
    <path d="M165 90q0 35-21 59t-62 24q-37 0-59-24T0 95q0-35 23-61T83 8t60 24t22 58M0 750h165V214H0zm560-528q-32 0-57 8t-45 21t-33 27t-21 27h-4l-9-70H243q0 34 2 74t2 86v355h165V457q0-12 1-22t3-19q4-11 11-23t16-21t22-16t29-6q44 0 64 32t19 83v285h165V445q0-57-14-99t-38-70t-58-41t-72-13"/>
</svg>
{/snippet}

{#snippet SoundCloudIcon({ fill = "currentColor", class: className = "" })}
<svg class={className} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill={fill}>
    <path d="M1.16 16.466c.049 0 .09-.039.098-.093l.27-2.022l-.27-2.069a.103.103 0 0 0-.099-.093c-.05 0-.094.04-.1.093l-.236 2.069l.236 2.021c.006.055.05.094.1.094m-.887-.769c.048 0 .088-.036.095-.09l.209-1.256l-.209-1.28c-.007-.053-.047-.09-.095-.09c-.051 0-.09.037-.098.09L0 14.351l.174 1.256c.008.053.047.09.098.09m1.948-3.8a.12.12 0 0 0-.12-.114a.12.12 0 0 0-.119.114l-.224 2.454l.224 2.364a.12.12 0 0 0 .12.112a.12.12 0 0 0 .12-.113l.254-2.363zm.832 5.026a.143.143 0 0 0 .14-.133l.241-2.439l-.24-2.522a.143.143 0 0 0-.141-.132a.14.14 0 0 0-.14.133l-.213 2.521l.212 2.439a.14.14 0 0 0 .141.133m.958.039a.16.16 0 0 0 .162-.152l.226-2.459l-.226-2.34a.16.16 0 0 0-.162-.151a.16.16 0 0 0-.16.152l-.2 2.34l.2 2.458a.16.16 0 0 0 .16.152m1.36-2.61l-.212-3.805a.184.184 0 0 0-.182-.173a.183.183 0 0 0-.182.173l-.188 3.805l.188 2.458a.183.183 0 0 0 .364 0zm.581 2.635a.2.2 0 0 0 .201-.192v.002l.199-2.444l-.199-4.676a.203.203 0 0 0-.405 0l-.174 4.676l.175 2.443a.2.2 0 0 0 .203.19m.98-7.91a.22.22 0 0 0-.223.212l-.162 5.065l.162 2.418a.22.22 0 0 0 .223.211a.22.22 0 0 0 .223-.211l.185-2.418l-.185-5.065a.22.22 0 0 0-.223-.212m.989 7.911a.24.24 0 0 0 .244-.232v.002l.17-2.404l-.17-5.235a.24.24 0 0 0-.243-.232a.24.24 0 0 0-.243.232l-.153 5.235l.153 2.404c.002.129.11.23.243.23m.997-.002a.26.26 0 0 0 .263-.252v.002l.157-2.381l-.157-5.103a.26.26 0 0 0-.263-.25a.26.26 0 0 0-.264.25l-.138 5.103l.139 2.38c.003.14.119.25.263.25m1.431-2.63l-.142-4.917a.28.28 0 0 0-.284-.27a.28.28 0 0 0-.285.271l-.127 4.916l.127 2.366a.28.28 0 0 0 .285.27a.28.28 0 0 0 .284-.273v.003zm.586 2.64c.165 0 .301-.13.304-.29l.129-2.349l-.129-5.85a.3.3 0 0 0-.304-.291a.303.303 0 0 0-.305.291l-.115 5.848l.115 2.352c.003.158.14.289.305.289m1.009-9.33a.32.32 0 0 0-.327.31l-.133 6.382l.134 2.315a.32.32 0 0 0 .325.308a.32.32 0 0 0 .324-.311v.003l.146-2.315l-.146-6.381a.32.32 0 0 0-.323-.311m.922 9.332l8.182.004C22.678 17 24 15.732 24 14.167c0-1.564-1.322-2.832-2.953-2.832c-.404 0-.79.079-1.142.22C19.673 9.003 17.44 7 14.718 7c-.665 0-1.314.126-1.887.339c-.223.083-.283.168-.285.333v8.989a.35.35 0 0 0 .32.335"/>
</svg>
{/snippet}

{#snippet DiscordIcon({ fill = "currentColor", class: className = "" })}
<svg class={className} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill={fill}>
    <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/>
</svg>
{/snippet}



<div class="flex justify-end items-center mx-4 sm:max-w-lg sm:mx-auto sm:gap-24">
    {#if $session.data}
    <div class="flex gap-4 mx-4 justify-end">
            {#if $session.data.user.role === "admin"}
                <a href="/upload">
                    <Upload class="size-8 text-muted-foreground" />
                </a>
            {/if}

        <button
            onclick={async () => {
                await authClient.signOut();
                goto("/");
            }}
        >
            <CircleUserRound class="size-8 text-red-700/80"/>
        </button>
    </div>

        {:else}
        <a href={LOGIN_PAGE}>
            <CircleUserRound class="size-8 text-muted-foreground"/>
        </a>
        {/if}
</div>