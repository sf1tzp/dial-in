import"./DsnmJJEf.js";import{p as A,c as v,aZ as m,a as h,V as g,W as S,b as d,Z as r,aY as N,aI as c,be as w,z as _,aN as x,aX as f}from"./mSWrT_we.js";import{s as b,r as y}from"./CsnCIJua.js";import{I as T}from"./DV7kP8r_.js";import{i as I,s as U,P as C,w as P,e as E,b as z}from"./CjsTw8eQ.js";import{i as F}from"./Hp6PP2aI.js";function Y(e,t){A(t,!0);let n=y(t,["$$slots","$$events","$$legacy"]);const i=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];T(e,b({name:"sun"},()=>n,{get iconNode(){return i},children:(a,u)=>{var s=m(),o=h(s);g(o,()=>t.children??S),d(a,s)},$$slots:{default:!0}})),v()}function G(e,t){A(t,!0);let n=y(t,["$$slots","$$events","$$legacy"]);const i=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9"}],["path",{d:"m18 15 4-4"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5"}]];T(e,b({name:"hammer"},()=>n,{get iconNode(){return i},children:(a,u)=>{var s=m(),o=h(s);g(o,()=>t.children??S),d(a,s)},$$slots:{default:!0}})),v()}function j(e,t){if(I(e)){const i=e();return i===void 0?t:i}return e===void 0?t:e}function J(e,t){let n=N(null);const i=w(()=>j(t,250));function a(...u){if(r(n))r(n).timeout&&clearTimeout(r(n).timeout);else{let s,o;const p=new Promise((M,O)=>{s=M,o=O});c(n,{timeout:null,runner:null,promise:p,resolve:s,reject:o},!0)}return r(n).runner=async()=>{if(!r(n))return;const s=r(n);c(n,null);try{s.resolve(await e.apply(this,u))}catch(o){s.reject(o)}},r(n).timeout=setTimeout(r(n).runner,r(i)),r(n).promise}return a.cancel=async()=>{(!r(n)||r(n).timeout===null)&&(await new Promise(u=>setTimeout(u,0)),!r(n)||r(n).timeout===null)||(clearTimeout(r(n).timeout),r(n).reject("Cancelled"),c(n,null))},a.runScheduledNow=async()=>{(!r(n)||!r(n).timeout)&&(await new Promise(u=>setTimeout(u,0)),!r(n)||!r(n).timeout)||(clearTimeout(r(n).timeout),r(n).timeout=null,await r(n).runner?.())},Object.defineProperty(a,"pending",{enumerable:!0,get(){return!!r(n)?.timeout}}),a}class K{#e;#t;constructor(t,n){this.#e=t,this.#t=n,this.handler=this.handler.bind(this),_(this.handler)}handler(){let t=0;const n=this.#e();if(!n)return;const i=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(this.#t)});return i.observe(n),()=>{window.cancelAnimationFrame(t),i.unobserve(n)}}}class R{state;#e;constructor(t,n){this.state=U(t),this.#e=n,this.dispatch=this.dispatch.bind(this)}#t(t){return this.#e[this.state.current][t]??this.state.current}dispatch(t){this.state.current=this.#t(t)}}const D={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}};class H{opts;#e=N("none");get prevAnimationNameState(){return r(this.#e)}set prevAnimationNameState(t){c(this.#e,t,!0)}#t=N(x({}));get styles(){return r(this.#t)}set styles(t){c(this.#t,t,!0)}initialStatus;previousPresent;machine;present;constructor(t){this.opts=t,this.present=this.opts.open,this.initialStatus=t.open.current?"mounted":"unmounted",this.previousPresent=new C(()=>this.present.current),this.machine=new R(this.initialStatus,D),this.handleAnimationEnd=this.handleAnimationEnd.bind(this),this.handleAnimationStart=this.handleAnimationStart.bind(this),$(this),k(this),L(this)}handleAnimationEnd(t){if(!this.opts.ref.current)return;const n=l(this.opts.ref.current),i=n.includes(t.animationName)||n==="none";t.target===this.opts.ref.current&&i&&this.machine.dispatch("ANIMATION_END")}handleAnimationStart(t){this.opts.ref.current&&t.target===this.opts.ref.current&&(this.prevAnimationNameState=l(this.opts.ref.current))}#n=w(()=>["mounted","unmountSuspended"].includes(this.machine.state.current));get isPresent(){return r(this.#n)}set isPresent(t){c(this.#n,t)}}function $(e){P(()=>e.present.current,()=>{if(!e.opts.ref.current||!(e.present.current!==e.previousPresent.current))return;const n=e.prevAnimationNameState,i=l(e.opts.ref.current);if(e.present.current)e.machine.dispatch("MOUNT");else if(i==="none"||e.styles.display==="none")e.machine.dispatch("UNMOUNT");else{const a=n!==i;e.previousPresent.current&&a?e.machine.dispatch("ANIMATION_OUT"):e.machine.dispatch("UNMOUNT")}})}function k(e){P(()=>e.machine.state.current,()=>{if(!e.opts.ref.current)return;const t=l(e.opts.ref.current);e.prevAnimationNameState=e.machine.state.current==="mounted"?t:"none"})}function L(e){P(()=>e.opts.ref.current,()=>{if(e.opts.ref.current)return e.styles=getComputedStyle(e.opts.ref.current),E(f(e.opts.ref.current,"animationstart",e.handleAnimationStart),f(e.opts.ref.current,"animationcancel",e.handleAnimationEnd),f(e.opts.ref.current,"animationend",e.handleAnimationEnd))})}function l(e){return e&&getComputedStyle(e).animationName||"none"}function Q(e,t){A(t,!0);const n=new H({open:z(()=>t.open),ref:t.ref});var i=m(),a=h(i);{var u=s=>{var o=m(),p=h(o);g(p,()=>t.presence??S,()=>({present:n.isPresent})),d(s,o)};F(a,s=>{(t.forceMount||t.open||n.isPresent)&&s(u)})}d(e,i),v()}export{G as H,Q as P,Y as S,K as a,R as b,J as u};
